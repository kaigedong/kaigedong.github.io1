<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106894479-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      var gtag = function () {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-106894479-1");
    </script>
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="读书笔记" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/solarized-light.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/clipboard.min.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    <script defer type="text/javascript" src="/js/search.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var searchPath = "search.xml";
      if (searchPath.length === 0) {
        searchPath = "search.xml";
      }
      var path = "/" + searchPath;
      searchFunc(path, "search-input", "search-result");
    });
    </script>
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    <script type="text/javascript">
    $(document).ready(function () {
      var cb = null;
      var els = $(".post figure.highlight");
      if (els.length) {
        // Enabled Hexo highlight line number.
        $(els).each(function (i, e) {
          $(e).before("<button class=\"copy button\">复制</button>");
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              // nextElementSibling is figure,highlight.
              // And following is the sequence of Hexo's internal
              // highlight layout with line number.
              return trigger.nextElementSibling.firstChild.firstChild.firstChild.lastChild.firstChild.firstChild;
          }
        });
      } else {
        // Disabled Hexo highlight line number.
        els = $(".post pre code");
        $(els).each(function (i, e) {
          // Add button before pre, not code.
          $(e).parent().before("<button class=\"copy button\">复制</button>");
        });
        cb = new ClipboardJS("button.copy", {
          "target": function (trigger) {
              // Get target element by DOM API.
              // nextElementSibling is figure,highlight.
              // And following is the sequence of Hexo's internal
              // highlight layout without line number.
              return trigger.nextElementSibling.firstChild;
          }
        });
      }
      cb.on("success", function (e) {
        e.clearSelection();
        var trigger = e.trigger;
        // Change button text as a user tip.
        trigger.innerHTML = "已复制";
        $(trigger).addClass("copied");
        // Change button text back;
        setTimeout(function () {
          trigger.innerHTML = "复制";
          $(trigger).removeClass("copied");
        }, 1500);
      });
    });
    </script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Manjaro-安装配置到GPU | 读书笔记</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">读书笔记</a></h1>
        <h2 class="subtitle"></h2>
      </div>
      
      <div class="logo">
        <img src="/images/my_logo.png" alt="logo">
      </div>
      
    </div>
    <nav id="nav" class="nav">
      <a id="nav-toggle" class="nav-toggle" aria-hidden="true"><i class="fas fa-bars" aria-label="切换导航栏"></i></a>
      <ul id="menu" role="menubar" aria-hidden="false">
        
        <li role="menuitem"><a href="/"><i class="fas fa-home"></i><span class="menu-text">首页</span></a></li>
        
        <li role="menuitem"><a href="/archives/"><i class="fas fa-archive"></i><span class="menu-text">归档</span></a></li>
        
        <li role="menuitem"><a href="/categories/"><i class="fas fa-th-list"></i><span class="menu-text">分类</span></a></li>
        
        <li role="menuitem"><a href="/tags/"><i class="fas fa-tags"></i><span class="menu-text">标签</span></a></li>
        
        <li role="menuitem"><a href="/about/"><i class="fas fa-user-edit"></i><span class="menu-text">关于</span></a></li>
        
      </ul>
    </nav>
  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<div id="post" class="page">
  
  <article class="article post card animate" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/11/Manjaro-安装配置到GPU/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="Kaige Dong">
       <meta itemprop="description" content="">
       <meta itemprop="image" content="/images/myavatar.png">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="读书笔记">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">Manjaro-安装配置到GPU</h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2019-04-11T10:14:07+08:00">2019-04-11 10:14:07</time></span>
        </span>
        
        
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-comment-count">
          <i class="far fa-comments"></i><span><a href="/2019/04/11/Manjaro-安装配置到GPU/#disqus_thread" itemprop="discussionUrl"><span class="post-comment-count disqus-comment-count" data-disqus-identifier="2019/04/11/Manjaro-安装配置到GPU/" itemprop="commentCount"></span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-main" itemprop="articleBody">
      <blockquote>
<p>Manjaro的安装、配置、设置steam使用GPU，pytorch使用GPU</p>
</blockquote>
<a id="more"></a>
<h2 id="安装Manjaro"><a href="#安装Manjaro" class="headerlink" title="安装Manjaro"></a>安装Manjaro</h2><blockquote>
<p>下载、安装Manjaro (xface)<br>中科大镜像：<a href="https://mirrors.ustc.edu.cn/manjaro-cd/" target="_blank" rel="noopener">https://mirrors.ustc.edu.cn/manjaro-cd/</a></p>
</blockquote>
<figure class="hljs highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$ wget https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/manjaro-cd/</span>xfce<span class="hljs-regexp">/18.0.4/m</span>anjaro-xfce-<span class="hljs-number">18.0</span>.<span class="hljs-number">4</span>-stable-x86_64.iso<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Mac OS系统下制作U盘启动：</p>
</blockquote>
<figure class="hljs highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$ sudo diskutil list<br><span class="hljs-built_in">..</span>.<br>/dev/disk8 (external, physical):<br>   #:                      <span class="hljs-built_in"> TYPE </span>NAME                    SIZE       IDENTIFIER<br>   0:     FDisk_partition_scheme                        <span class="hljs-number">*31</span>.0 GB    disk8<br>   1:             Windows_FAT_32 KINGSTON                31.0 GB    disk8s1<br><br>$ diskutil umount /dev/disk8s1 <br>Volume KINGSTON on disk8s1 unmounted<br><br>$ sudo dd <span class="hljs-attribute">if</span>=/path/of/manjaro-xfce-18.0.4-stable-x86_64.iso  <span class="hljs-attribute">of</span>=/dev/disk8 <span class="hljs-attribute">bs</span>=1m<br></code></pre></td></tr></table></figure>
<blockquote>
<p>安装的时候，先选英文。装好系统再改为中文(这样~下的文件夹就会是英文的了)。</p>
<p>Manjaro 国内源 + ArchlinuxCN 国内源 设置</p>
</blockquote>
<figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-meta">$</span><span class="bash"> sudo pacman-mirrors -i -c China -m rank  <span class="hljs-comment"># 生成可用中国镜像站列表，勾选 http://mirrors.ustc.edu.cn/manjaro/ ，然后按 OK 键两次。</span></span><br><span class="hljs-meta">$</span><span class="bash"> sudo pacman -Syyu <span class="hljs-comment"># 升级系统到最新</span></span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>ArchLinuxCN 中科大源 (Arch Linux 中文社区仓库是由 Arch Linux 中文社区驱动的非官方用户仓库)。</p>
</blockquote>
<figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-meta">#</span><span class="bash"> /etc/pacman.conf 文件末尾添加：</span><br><br>[archlinuxcn]<br>Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch<br><span class="hljs-meta"><br>#</span><span class="bash"> 然后安装 archlinuxcn-keyring 包以导入 GPG key。</span><br><span class="hljs-meta">$</span><span class="bash"> sudo pacman -Syyu</span><br><span class="hljs-meta">$</span><span class="bash"> sudo pacman -S archlinuxcn-keyring</span><br></code></pre></td></tr></table></figure>
<h2 id="开机挂载第二块硬盘"><a href="#开机挂载第二块硬盘" class="headerlink" title="开机挂载第二块硬盘"></a>开机挂载第二块硬盘</h2><p>查看硬盘信息：<br><code>$ sudo fdisk -l # 查看我的是/dev/sdb1</code><br><code>$ ls -l /dev/disk/by-uuid/</code># 查看对应的UUID</p>
<p>然后编辑　<code>/etc/fstab</code><br>增加一行:<br><code>UUID=a8786e51-eda0-41fe-... /home/bobo/Data ext4 defaults 0 0</code></p>
<p>要注意建立个文件夹：` 要是bobo的所有权，否则干啥都要root，硬盘将挂载在这里。</p>
<p>然后<strong>重启</strong>之后就自动挂载了。</p>
<h2 id="Arch-配置服务"><a href="#Arch-配置服务" class="headerlink" title="Arch 配置服务"></a>Arch 配置服务</h2><figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined">当通过Arch wiki 查到不同软件提供的服务之后，可以按照下面命令控制这些服务<br><span class="hljs-meta"><br>$</span><span class="bash"> systemctl <span class="hljs-built_in">enable</span> sshd.service     开机启动</span><br><span class="hljs-meta">$</span><span class="bash"> systemctl start sshd.service      立即启动</span><br><span class="hljs-meta">$</span><span class="bash"> systemctl restart sshd.service    立即重启</span><br></code></pre></td></tr></table></figure>
<h2 id="安装常用软件"><a href="#安装常用软件" class="headerlink" title="安装常用软件"></a>安装常用软件</h2><figure class="hljs highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs undefined">sudo pacman -S code vim guake zotero pycharm-professional typora skype dbeaver shadowsocks-qt<span class="hljs-number">5</span> telegram-desktop electronic-wechat teamviewer<br><br>sudo pacman -S chromium  # 启用代理，用以同步 chromium --proxy-server=<span class="hljs-string">"socks5://127.0.0.1:1080"</span><br>sudo pacman -S flameshot # 最好的截图工具，配置开机启动，全局快捷键<br>udo pacman -S adobe-source-han-serif-cn-fonts adobe-source-han-serif-tw-fonts adobe-source-han-sans-cn-fonts adobe-source-han-sans-tw-fonts # 安装中文简体、繁体字体<br><br>sudo teamviewer --daemon start <br>sudo pacman -S mysql # https://wiki.archlinux.org/index.php/MariaDB_(<span class="hljs-symbol">%E7</span><span class="hljs-symbol">%AE</span><span class="hljs-symbol">%80</span><span class="hljs-symbol">%E4</span><span class="hljs-symbol">%BD</span><span class="hljs-symbol">%93</span><span class="hljs-symbol">%E4</span><span class="hljs-symbol">%B8</span><span class="hljs-symbol">%AD</span><span class="hljs-symbol">%E6</span><span class="hljs-symbol">%96</span><span class="hljs-symbol">%87</span>)#<span class="hljs-symbol">%E5</span><span class="hljs-symbol">%AE</span><span class="hljs-symbol">%89</span><span class="hljs-symbol">%E8</span><span class="hljs-symbol">%A3</span><span class="hljs-symbol">%85</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>flameshot截图的命令是 <code>flameshot gui</code>， 设置到系统的自定义快捷键。</p>
<p>安装完Teamviewer之后，打开网络有问题。执行<code>sudo teamviewer --daemon start</code>，再次打开，过一会就好了。参考<a href="https://bbs.archlinux.org/viewtopic.php?id=192406" target="_blank" rel="noopener">https://bbs.archlinux.org/viewtopic.php?id=192406</a></p>
</blockquote>
<h3 id="安装搜狗输入法"><a href="#安装搜狗输入法" class="headerlink" title="安装搜狗输入法"></a>安装搜狗输入法</h3><figure class="hljs highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$ sudo pacman -S fcitx fcitx-configtool<br>$ sudo pacman -S fcitx-im # 就选default(=all)，会安装fcitx-gtk2 fcitx-gtk3 fcitx-qt4 fcitx-qt5<br>$ sudo pacman -S fcitx-sogoupinyin<br><br>$ vim ~/.xprofile<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">GTK_IM_MODULE</span>=fcitx<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">QT_IM_MODULE</span>=fcitx<br><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">XMODIFIERS</span>=<span class="hljs-string">"@im=fcitx"</span><br><br>重启之后，配置即可。<br></code></pre></td></tr></table></figure>
<h3 id="安装AUR管理器"><a href="#安装AUR管理器" class="headerlink" title="安装AUR管理器"></a>安装AUR管理器</h3><figure class="hljs highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://aur.archlinux.org/yay.git<br>makepkg -si<br><br><span class="hljs-comment"># 用法</span><br>yay install some-package<br></code></pre></td></tr></table></figure>
<h3 id="配置vim"><a href="#配置vim" class="headerlink" title="配置vim"></a>配置vim</h3><figure class="hljs highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs undefined">git clone <span class="hljs-params">--depth=1</span> https:<span class="hljs-string">//github.com/amix/vimrc.git</span> ~<span class="hljs-string">/.vim_runtime</span><br>sh ~<span class="hljs-string">/.vim_runtime/install_awesome_vimrc.sh</span><br></code></pre></td></tr></table></figure>
<h3 id="配置zsh"><a href="#配置zsh" class="headerlink" title="配置zsh"></a>配置zsh</h3><blockquote>
<p>安装oh-my-zsh</p>
</blockquote>
<figure class="hljs highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined">git clone https:<span class="hljs-string">//github.com/robbyrussell/oh-my-zsh.git</span> ~<span class="hljs-string">/.oh-my-zsh</span><br>cp ~<span class="hljs-string">/.oh-my-zsh/templates/zshrc.zsh-template</span> ~<span class="hljs-string">/.zshrc</span><br><br>修改默认shell, 或自动启动zsh，对我没必要，我使用的是guake，可设置开启终端时的默认shell。<br>chsh -s <span class="hljs-string">/bin/zsh</span> 或者 <span class="hljs-keyword">echo</span> <span class="hljs-string">"exec /path/of/zsh --login"</span> &gt;&gt; <span class="hljs-string">.bash_profile</span> <span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>oh-my-zsh 主题及插件下载</p>
</blockquote>
<figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-meta">#</span><span class="bash"> 下载插件：</span><br><span class="hljs-meta">#</span><span class="bash"> 1. spaceship-prompt 主题 (https://github.com/denysdovhan/spaceship-prompt)</span><br><span class="hljs-meta"><br>$</span><span class="bash"> zsh</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://github.com/denysdovhan/spaceship-prompt.git <span class="hljs-string">"<span class="hljs-variable">$ZSH_CUSTOM</span>/themes/spaceship-prompt"</span></span><br><span class="hljs-meta">$</span><span class="bash"> ln -s <span class="hljs-string">"<span class="hljs-variable">$ZSH_CUSTOM</span>/themes/spaceship-prompt/spaceship.zsh-theme"</span> <span class="hljs-string">"<span class="hljs-variable">$ZSH_CUSTOM</span>/themes/spaceship.zsh-theme"</span></span><br><span class="hljs-meta"><br><br>#</span><span class="bash"> 2. zsh-syntax-highlighting 语法高亮插件</span><br><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="hljs-variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p><code>.zshrc</code> 的一些配置</p>
</blockquote>
<figure class="hljs highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-comment"># .zshrc: </span><br><span class="hljs-comment"># tldr代替man，fd 代替find，在rust那里下载安装。</span><br><br>alias la=<span class="hljs-string">"ls -lth"</span><br>alias man=<span class="hljs-string">"tldr"</span><br><br>ZSH_THEME=<span class="hljs-string">"spaceship"</span><br><br>HIST_STAMPS=<span class="hljs-string">"yyyy-mm-dd"</span><br><br>plugins=(<br>  extract git zsh-syntax-highlighting<br>)<br></code></pre></td></tr></table></figure>
<h3 id="安装rust环境"><a href="#安装rust环境" class="headerlink" title="安装rust环境"></a>安装rust环境</h3><figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-meta">#</span><span class="bash"> 1. 安装rust 中科大镜像加速rust安装 (参考https://lug.ustc.edu.cn/wiki/mirrors/<span class="hljs-built_in">help</span>/rust-static)</span><br>添加到 .zshrc<br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static  <span class="hljs-comment"># (用于更新 toolchain)</span></span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup  <span class="hljs-comment"># (用于更新 rustup)</span></span><br><br>curl https://sh.rustup.rs -sSf | sh  # 官网的安装程序<br><span class="hljs-meta"><br>#</span><span class="bash"> 2. 设置中科大Rust crates镜像 (https://lug.ustc.edu.cn/wiki/mirrors/<span class="hljs-built_in">help</span>/rust-crates)</span><br><span class="hljs-meta">#</span><span class="bash"> 在 <span class="hljs-variable">$HOME</span>/.cargo/config 添加下面内容</span><br><br>[source.crates-io]<br>registry = "https://github.com/rust-lang/crates.io-index"<br>replace-with = 'ustc'<br>[source.ustc]<br>registry = "git://mirrors.ustc.edu.cn/crates.io-index"<br><span class="hljs-meta"><br>#</span><span class="bash"> 3. 添加rust可执行程序文件夹到~/.zshrc</span><br><br>echo "export PATH=$PATH:$HOME/.cargo/bin" &gt;&gt; ~/.zshrc<br><span class="hljs-meta"><br>#</span><span class="bash"> 4. 安装好用的rust程序 fd &amp; tldr</span><br>cargo install fd-find<br>cargo install tealdeer<br></code></pre></td></tr></table></figure>
<h2 id="xfce-添加网速监控"><a href="#xfce-添加网速监控" class="headerlink" title="xfce 添加网速监控"></a>xfce 添加网速监控</h2><figure class="hljs highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$<span class="hljs-built_in"> ip </span>addr # 结果显示<br><br>1: lo: <span class="hljs-built_in">..</span>.<br>2: enp7s0: <span class="hljs-built_in">..</span>.<br>3. wlp6s0: <span class="hljs-built_in">..</span>.<br></code></pre></td></tr></table></figure>
<blockquote>
<p>其中第三个是我的无线网卡，在面板下面<code>右键</code>，<code>面板</code>–<code>添加新项目</code>中添加<code>网速监控</code>，则面板下方出现一个<code>Net</code>。</p>
<p>然后在面板的Net上右键<code>网速监控模块</code>–<code>属性</code>–在网络设备填入<code>wlp6s0</code>即可！</p>
</blockquote>
<h3 id="pip使用中科大源"><a href="#pip使用中科大源" class="headerlink" title="pip使用中科大源"></a>pip使用中科大源</h3><blockquote>
<p><code>pyenv</code> . github<a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener">地址</a>用法看<a href="https://kaigedong.github.io/2018/12/25/python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/" target="_blank" rel="noopener">python虚拟环境</a></p>
</blockquote>
<blockquote>
<p>Pip:</p>
</blockquote>
<figure class="hljs highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-comment"># $HOME/.config/pip/pip.conf</span><br><span class="hljs-section">[global]</span><br><span class="hljs-attr">index-url</span> = https://mirrors.ustc.edu.cn/pypi/web/simple<br><span class="hljs-attr">format</span> = columns<br></code></pre></td></tr></table></figure>
<h2 id="配置英伟达显卡！！"><a href="#配置英伟达显卡！！" class="headerlink" title="配置英伟达显卡！！"></a>配置英伟达显卡！！</h2><h3 id="steam-使用NVIDIA显卡"><a href="#steam-使用NVIDIA显卡" class="headerlink" title="steam 使用NVIDIA显卡"></a>steam 使用NVIDIA显卡</h3><p>我的笔记本：Acer VN7 592G；Intel + GTX 960M 双显卡</p>
<p>搞好再搞下面。搞坏重新装系统。</p>
<p>先看了<a href="http://www.cnblogs.com/smlile-you-me/p/8830949.html，没成功。但很有帮助。" target="_blank" rel="noopener">http://www.cnblogs.com/smlile-you-me/p/8830949.html，没成功。但很有帮助。</a><br>又看了<a href="https://www.youtube.com/watch?v=7KgX-LgDwQw" target="_blank" rel="noopener">https://www.youtube.com/watch?v=7KgX-LgDwQw</a> 终于成功了！</p>
<p>这次终于能够运行steam了！</p>
<p>首先，安装系统并更新系统，并重启。重启后：</p>
<blockquote>
<p>修改GRUB</p>
</blockquote>
<figure class="hljs highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs undefined"><span class="hljs-meta">#</span><span class="bash"> 上面的视频教程需要这个步骤，我没有ACPI错误，没进行这一步也没问题。</span><br><span class="hljs-meta">$</span><span class="bash"> sudo nano /etc/default/grub</span><br>修改：GRUB_CMDLINE_LINUX_DEFAULT="quiet resume=UUID... acpi_osi=! acpi_osi='Windows 2009'"<br><span class="hljs-meta">#</span><span class="bash"> 如果要运行NVIDIA显卡，需要添加后面两个 acpi_osi=! acpi_osi=<span class="hljs-string">'Windows 2009'</span>；不然有可能黑屏进不去系统，或者出现ACPI 错误。</span><br><span class="hljs-meta">$</span><span class="bash"> sudo update-grub <span class="hljs-comment"># 更新grub， 再次重启系统</span></span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>按照教程安装NVIDIA系统<br><figure class="hljs highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$ sudo mhwd -a pci nonfree 0300<br><br># 上面的步骤安装了9个软件： <br># Packages (9) egl-wayland<span class="hljs-string">-1</span>.1.2<span class="hljs-string">-1</span>  eglexternalplatform<span class="hljs-string">-1</span>.0<span class="hljs-string">+3</span>+g7c8f8e2<span class="hljs-string">-1</span>  primus<span class="hljs-string">-20151110</span><span class="hljs-string">-8</span>  bumblebee<span class="hljs-string">-3</span>.2.1<span class="hljs-string">-22</span>  lib32-nvidia-utils<span class="hljs-string">-1</span>:418.43<span class="hljs-string">-2</span>  lib32-primus<span class="hljs-string">-20151110</span><span class="hljs-string">-4</span>  linux419-bbswitch<span class="hljs-string">-0</span>.8<span class="hljs-string">-27</span>  linux419-nvidia<span class="hljs-string">-1</span>:418.43<span class="hljs-string">-9</span>  nvidia-utils<span class="hljs-string">-1</span>:418.43<span class="hljs-string">-2</span><br><br>sudo gpasswd -a xxx bumblebee # 将用户添加到bumblebee组，后面运行NVIDIA的setting组件，会提示错误。<br></code></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p><strong>重启</strong>检查是否安装好了</p>
</blockquote>
<figure class="hljs highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs undefined">$ mhwd -li 可以发现<br><br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>                  NAME               VERSION          FREEDRIVER           <span class="hljs-keyword">TYPE</span><br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>         network-r8168            <span class="hljs-number">2016.04</span>.<span class="hljs-number">20</span>                <span class="hljs-literal">true</span>            PCI<br>           video-linux            <span class="hljs-number">2018.05</span>.<span class="hljs-number">04</span>                <span class="hljs-literal">true</span>            PCI<br>video-hybrid-intel-nvidia-bumblebee            <span class="hljs-number">2018.08</span>.<span class="hljs-number">09</span>               <span class="hljs-literal">false</span>            PCI<br><br><br>$ sudo optirun glxgears # Ran后跑起来一个轮子测试一下，会出现一个小正方形动图。<br><br>我们看看GPU是OFF 还是 <span class="hljs-keyword">ON</span>？<br>$ watch cat /proc/acpi/bbswitch # refresh every <span class="hljs-number">2</span> seconds, <span class="hljs-keyword">to</span> see whether GPU <span class="hljs-keyword">is</span> <span class="hljs-symbol">'ON</span>' <span class="hljs-keyword">or</span> <span class="hljs-symbol">'OFF</span>'<br><br>然后再看一下，有哪些程序运行在NVIDIA上<br>$ nvidia-smi<br></code></pre></td></tr></table></figure>
<blockquote>
<p>到上面，就已经安装好了NVIDIA，当需要的时候是能够运行NVIDIA的。</p>
<p>那么怎么启动呢？其实，Manjaro网站上的教程很详细，<a href="https://wiki.manjaro.org/index.php?title=Configure_NVIDIA_(non-free)_settings_and_load_them_on_Startup" target="_blank" rel="noopener">https://wiki.manjaro.org/index.php?title=Configure_NVIDIA_(non-free)_settings_and_load_them_on_Startup</a></p>
<p>当我们需要用显卡运行一个程序，运行命令<code>primusrun program1</code> (program是steam主程序，我的会有点问题)</p>
<p>当我们想要用显卡运行steam里面的游戏，进去steam的库，右键游戏，点<code>属性</code>，然后点<code>设置启动选项</code>,里面输入<code>primusrun %command%</code>，不要输错，不要改。Ran后再运行游戏，就能调用显卡就行了！！</p>
</blockquote>
<h3 id="pytorch-调用显卡"><a href="#pytorch-调用显卡" class="headerlink" title="pytorch 调用显卡"></a>pytorch 调用显卡</h3><figure class="hljs highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs undefined"># 首先安装<br>sudo pacman -S python-pytorch-cuda<br>#　这将安装以下包，之所以不用pytorch官网的方法，是太慢啦。<br>Packages (8) cblas<span class="hljs-string">-3</span>.8.0<span class="hljs-string">-2</span>  cuda<span class="hljs-string">-10</span>.1.105<span class="hljs-string">-6</span>  cudnn<span class="hljs-string">-7</span>.5.0.56<span class="hljs-string">-1</span>  nccl<span class="hljs-string">-2</span>.4.2<span class="hljs-string">-4</span>  opencl-nvidia<span class="hljs-string">-1</span>:418.43<span class="hljs-string">-1</span>  opencv<span class="hljs-string">-4</span>.0.1<span class="hljs-string">-6</span>  python-numpy<span class="hljs-string">-1</span>.16.2<span class="hljs-string">-1</span>  python-pytorch-cuda<span class="hljs-string">-1</span>.0.1<span class="hljs-string">-5</span><br><br># 测试pytorch能否调用NVIDIA显卡<br>$ python<br>&gt;&gt;&gt;import torch<br>&gt;&gt;&gt;print(torch.cuda.is_available())<br>False<br><br># 因为NVIDIA显卡没有开！下面命令打开和关闭NVIDIA程序，当是ON的时候，上面就是TRUE了！！<br><br>sudo tee /proc/acpi/bbswitch &lt;&lt;&lt; ON<br>sudo tee /proc/acpi/bbswitch &lt;&lt;&lt; OFF<br></code></pre></td></tr></table></figure>
    </main>
    <footer class="post-footer">
      
      <div class="post-tags">
        
        <a class="post-tag button" href="/tags/Nvidia/" rel="tag"><i class="fas fa-tags"></i>Nvidia</a>
        
        <a class="post-tag button" href="/tags/GPU/" rel="tag"><i class="fas fa-tags"></i>GPU</a>
        
        <a class="post-tag button" href="/tags/Manjaro/" rel="tag"><i class="fas fa-tags"></i>Manjaro</a>
        
        <a class="post-tag button" href="/tags/Arch/" rel="tag"><i class="fas fa-tags"></i>Arch</a>
        
      </div>
      
    </footer>
  </article>
  
  
  <nav class="page-nav">
    <div class="page-nav-next page-nav-item">
      
      <a href="/2019/04/09/饥荒mod1/" rel="next" title="饥荒mod1"><i class="fas fa-angle-left"></i><span class="nav-title">饥荒mod1</span></a>
      
    </div>
    <div class="page-nav-prev page-nav-item">
      
    </div>
  </nav>
  
  
  

<div class="comments" id="comments">
  
  <script defer id="dsq-count-scr" src="//kaigedong.disqus.com/count.js"></script>
  
  <div id="disqus_thread" class="disqus_thread"></div>
  <script type="text/javascript">
  var disqus_config = function () {
    this.page.url = "http://yoursite.com/2019/04/11/Manjaro-安装配置到GPU/";
    this.page.identifier = "2019/04/11/Manjaro-安装配置到GPU/";
  };
  (function() {
    var d = document, s = d.createElement("script");
    s.src = "https://kaigedong.disqus.com/embed.js";
    s.setAttribute("data-timestamp", +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  
  
</div>



  
</div>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/background.png);">
  
  <div class="search">
    <div class="form-group">
      <i class="fas fa-search"></i><input type="search" id="search-input" name="q" results="0" placeholder="搜索" class="form-control"/>
    </div>
  </div>
  <div class="search-result-box" id="search-result"></div>
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="/images/myavatar.png" alt="Kaige Dong">
  
  <h1 class="author-name">Kaige Dong</h1>
  <h2 class="author-description"></h2>
  <div class="site-count">
    
    
    
    
    <div class="archives-count count-block">
      <div class="site-count-title">归档</div>
      <div><a href="/archives/">67</a></div>
    </div>
    
    
    
    <div class="categories-count count-block">
      <div class="site-count-title">分类</div>
      <div><a href="/categories/">3</a></div>
    </div>
    
    
    
    <div class="tags-count count-block">
      <div class="site-count-title">标签</div>
      <div><a href="/tags/">24</a></div>
    </div>
    
    
    
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    
    
    
    
    <hr>
    <div class="post-toc sidebar-item" id="toc-div">
      <div><i class="fas fa-list-ol"></i>文章目录</div>
      <div class="post-toc-content"><ol class="list-group toc"><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#安装Manjaro"><span class="toc-text">安装Manjaro</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#开机挂载第二块硬盘"><span class="toc-text">开机挂载第二块硬盘</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#Arch-配置服务"><span class="toc-text">Arch 配置服务</span></a></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#安装常用软件"><span class="toc-text">安装常用软件</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#安装搜狗输入法"><span class="toc-text">安装搜狗输入法</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#安装AUR管理器"><span class="toc-text">安装AUR管理器</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#配置vim"><span class="toc-text">配置vim</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#配置zsh"><span class="toc-text">配置zsh</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#安装rust环境"><span class="toc-text">安装rust环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#xfce-添加网速监控"><span class="toc-text">xfce 添加网速监控</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#pip使用中科大源"><span class="toc-text">pip使用中科大源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="list-group-item toc-link" href="#配置英伟达显卡！！"><span class="toc-text">配置英伟达显卡！！</span></a><ol class="list-group toc-child"><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#steam-使用NVIDIA显卡"><span class="toc-text">steam 使用NVIDIA显卡</span></a></li><li class="toc-item toc-level-3"><a class="list-group-item toc-link" href="#pytorch-调用显卡"><span class="toc-text">pytorch 调用显卡</span></a></li></ol></li></ol></div>
    </div>
    
    
    
    <hr>
    <div class="social-link sidebar-item">
      <div><i class="far fa-address-card"></i>社交链接</p></div>
      <ul>
        
        <li><i class="fas fa-envelope"></i><a href="mailto:dongkaige@gmail.com" target="_blank">E-Mail</a></li>
        
        <li><i class="fab fa-github"></i><a href="https://github.com/kaigedong" target="_blank">GitHub</a></li>
        
        <li><i class="fab fa-weibo"></i><a href="https://weibo.com/u/2264075493" target="_blank">Weibo</a></li>
        
      </ul>
    </div>
    
    
    <hr>
    <div class="blogroll sidebar-item">
      <div><i class="fas fa-link"></i>友情链接</div>
      <ul>
        
        <li><i class="fas fa-link"></i><a href="https://github.com/" target="_blank">GitHub</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://developer.mozilla.org/" target="_blank">MDN</a></li>
        
        <li><i class="fas fa-link"></i><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a></li>
        
      </ul>
    </div>
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <button id="back-to-top"><i class="fas fa-angle-double-up" aria-label="回到顶部"></i></button>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">Kaige Dong</span><span class="year"><i class="far fa-copyright"></i>2016 - 2019</span>
        </div>
        
        <div class="busuanzi">
          <span id="busuanzi_container_site_pv"><i class="fas fa-eye" aria-label="站点点击量" aria-hidden="false"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user" aria-label="站点用户数" aria-hidden="false"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv" aria-label="页面点击量" aria-hidden="false"></span></span>
        </div>
        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动 | 主题 <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
